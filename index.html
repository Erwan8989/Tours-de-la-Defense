<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./css/style.css">
        <title>Document</title>
    </head>
    <body>
        <header>
            <h1>Tours de la DÃ©fense</h1>
            <nav>
                <ul>
                    <a href="#"><li class="active">Home</li></a>
                    <a href="#"><li>About us</li></a>
                    <a href="#"><li>Our Team</li></a>
                    <a href="#"><li>Contact us</li></a>
                </ul>
            </nav>
            <ion-icon name="menu-outline"></ion-icon>
        </header>
        <main>
            <h2 class="hero"></h2>
            <section class="anime-container">
                <article class="img">
                    <div class="arche bande bande1"></div>
                    <div class="heckla bande bande2"></div>
                    <div class="first bande bande4"></div>
                    <div class="edf bande bande2"></div>
                    <div class="trinity bande bande3"></div>
                    <div class="majunga bande bande4"></div>
                    <div class="total bande bande1"></div>
                    <div class="coeur_defense bande bande4"></div>
                    <div class="alto bande bande2"></div>
                    <div class="ste_generale bande bande3"></div>
                </article>
            </section>

            <section class="card-container" style="opacity: 0.2" id="card">

            </section>
        </main>
        <script src="./js/script.js"></script>
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/animejs@3.0.1/lib/anime.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/TypewriterJS/2.18.0/core.min.js"
            integrity="sha512-XpSfIIupzvkhza/hT76X11BXXysUeg/bTeTB/Obn+8U2x3Ul12Kb071BBL3zUV8JL7G7YOooKVhjJeolBcUtOQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            let tl = anime.timeline({
                easing: 'easeOutExpo',
                duration: 750,
            })
            tl.add({
                targets: 'article div',
                backgroundColor: '#faaf38',
                width: '100%',
                delay: anime.stagger(100)
            })
            tl.add({
                targets: 'article div',
                opacity: .5,
                marginRight: '.5rem',
                delay: anime.stagger(100)
            })
            tl.add({
                targets: 'h2',
                opacity: 1,
                translateY: '-200%',
                duration: 4000,
            },'-=1600')

            window.addEventListener('scroll',() => {
                let value = Math.trunc(window.scrollY - window.scrollY * 0.35);
                let root = document.querySelector(':root');
                let card = document.getElementById('card');
                let img_id = document.getElementById('img_id');
                let rootStyle = getComputedStyle(root);
                let heightWindow = window.innerHeight + 64;
                let currentScroll = window.scrollY + 64;

                if (currentScroll <= heightWindow) {

                    let top1 = rootStyle.getPropertyValue('--top1');
                    let top2 = rootStyle.getPropertyValue('--top2');
                    let top3 = rootStyle.getPropertyValue('--top3');

                    let total_value1 = value + "px";
                    let total_value2 = value * 1.2 + "px";
                    let total_value3 = value * 1.3 + "px";
                    let total_value4 = value * 1.4 + "px";

                    root.style.setProperty('--top1', total_value1);
                    root.style.setProperty('--top2', total_value2);
                    root.style.setProperty('--top3', total_value3);
                    root.style.setProperty('--top4', total_value4);

                    let test = ((currentScroll * 100) / heightWindow) / 100
                    card.style.setProperty('opacity', test);
                } else {
                    card.style.setProperty('opacity', 1);
                }
            })

            setTimeout(function () {
            let qualities = ['Elegantes','Majestueuses','Modernes','Imposantes'];
            let writing = new Typewriter('.hero', {
                loop: true,
                delay: 100,
            })
                for (let i = 0; i < qualities.length; i++) {
                    writing
                            .pauseFor(1000)
                            .typeString(qualities[i])
                            .pauseFor(1500)
                            .deleteAll(50)
                            .pauseFor(500)
                            .start();
                }
            }, 2750)

            // name.addEventListener('mouseleave',() => {
            //     console.log('test2')
            //     rotating.reverse()
            // })
            // let grids = document.querySelectorAll('article div');
            // let num = 0;
            // const delay = time => new Promise(resolve => setTimeout(resolve, time));

            // grids.forEach(grid => {
            //     delay(0).then(() => {
            //         setTimeout(() => {
            //             grid.style.backgroundColor = '#faaf38';
            //         }, num += 100);
            //     })
            //     delay(500).then(() => {
            //         setTimeout(() => {
            //             grid.style.backgroundColor = '#efdacc';
            //         }, num += 100);
            //     })
            // })
        </script>
    </body>
</html>